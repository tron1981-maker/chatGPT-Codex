<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŒ 3D íƒœì–‘ê³„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            color: #fff;
        }

        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }

        #controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            border: 2px solid #444;
            padding: 15px;
            border-radius: 8px;
            z-index: 100;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }

        #controls h3 {
            color: #ffcc00;
            margin-bottom: 10px;
            font-size: 14px;
            text-shadow: 0 0 10px #ffcc00;
        }

        .control-row {
            margin: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-row label {
            min-width: 60px;
            color: #aaa;
        }

        input[type="range"] {
            width: 100px;
            cursor: pointer;
            accent-color: #ffcc00;
        }

        button {
            background: linear-gradient(180deg, #444, #222);
            color: #fff;
            border: 1px solid #666;
            padding: 6px 12px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            transition: all 0.2s;
            border-radius: 4px;
        }

        button:hover {
            background: linear-gradient(180deg, #555, #333);
            border-color: #ffcc00;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
        }

        button:active {
            background: #222;
            transform: scale(0.98);
        }

        button.active {
            background: linear-gradient(180deg, #664400, #442200);
            border-color: #ffcc00;
        }

        #info-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffcc00;
            padding: 15px;
            min-width: 280px;
            display: none;
            z-index: 100;
            border-radius: 8px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.2);
        }

        #info-panel h2 {
            color: #ffcc00;
            margin-bottom: 10px;
            font-size: 16px;
            text-shadow: 0 0 10px #ffcc00;
        }

        #info-panel p {
            margin: 5px 0;
            font-size: 11px;
            color: #ccc;
        }

        #info-panel .planet-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 8px;
            vertical-align: middle;
            border-radius: 50%;
            box-shadow: 0 0 5px currentColor;
        }

        #instructions {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            border: 2px solid #444;
            padding: 15px;
            font-size: 11px;
            color: #888;
            z-index: 100;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        #instructions h4 {
            color: #ffcc00;
            margin-bottom: 8px;
            text-shadow: 0 0 10px #ffcc00;
        }

        #instructions p {
            margin: 4px 0;
        }

        .key {
            background: linear-gradient(180deg, #444, #222);
            padding: 2px 8px;
            border: 1px solid #555;
            color: #fff;
            border-radius: 3px;
            font-size: 10px;
        }

        #fps {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: #444;
            font-size: 10px;
        }

        #view-mode {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            border: 2px solid #444;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 100;
            display: flex;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        #view-mode button.active {
            background: linear-gradient(180deg, #664400, #442200);
            border-color: #ffcc00;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
        }

        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffcc00;
            font-size: 24px;
            z-index: 1000;
            text-shadow: 0 0 20px #ffcc00;
        }

        .camera-hint {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 204, 0, 0.6);
            font-size: 12px;
            text-align: center;
            animation: fadeInOut 3s ease-in-out;
            pointer-events: none;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="loading">ğŸŒŒ 3D íƒœì–‘ê³„ ë¡œë”©ì¤‘...</div>
    <div id="canvas-container"></div>

    <div id="view-mode">
        <button id="view-top" class="view-btn">ìœ„ì—ì„œ</button>
        <button id="view-side" class="view-btn">ì˜†ì—ì„œ</button>
        <button id="view-front" class="view-btn">ì•ì—ì„œ</button>
        <button id="view-free" class="view-btn active">ììœ  ì‹œì </button>
    </div>

    <div id="controls">
        <h3>âš™ï¸ ì»¨íŠ¸ë¡¤</h3>
        <div class="control-row">
            <label>ì†ë„:</label>
            <input type="range" id="speed" min="0" max="5" step="0.1" value="1">
            <span id="speed-val">1x</span>
        </div>
        <div class="control-row">
            <label>í¬ê¸°:</label>
            <input type="range" id="planet-scale" min="0.5" max="3" step="0.1" value="1">
            <span id="scale-val">1x</span>
        </div>
        <div class="control-row">
            <button id="toggle-orbits">ê¶¤ë„ ìˆ¨ê¸°ê¸°</button>
            <button id="toggle-names">ì´ë¦„ ìˆ¨ê¸°ê¸°</button>
        </div>
        <div class="control-row">
            <button id="reset-view">ë·° ë¦¬ì…‹</button>
            <button id="toggle-pause">ì¼ì‹œì •ì§€</button>
        </div>
        <div class="control-row">
            <button id="toggle-realistic">ì‹¤ì œ ë¹„ìœ¨</button>
            <button id="auto-rotate">ìë™ íšŒì „</button>
        </div>
    </div>

    <div id="instructions">
        <h4>ğŸ® 3D ì¡°ì‘ë²•</h4>
        <p><span class="key">ì¢Œí´ë¦­ + ë“œë˜ê·¸</span> íšŒì „</p>
        <p><span class="key">ìš°í´ë¦­ + ë“œë˜ê·¸</span> ì´ë™</p>
        <p><span class="key">íœ </span> ì¤Œ ì¸/ì•„ì›ƒ</p>
        <p><span class="key">í´ë¦­</span> í–‰ì„± ì„ íƒ</p>
        <p><span class="key">Space</span> ì¼ì‹œì •ì§€</p>
        <p><span class="key">R</span> ë·° ë¦¬ì…‹</p>
        <p><span class="key">1-4</span> ì‹œì  ë³€ê²½</p>
    </div>

    <div id="info-panel">
        <h2 id="planet-name">í–‰ì„±</h2>
        <p><span class="planet-color" id="planet-color-box"></span><span id="planet-type"></span></p>
        <p id="planet-desc"></p>
        <p>ğŸŒ¡ï¸ í‰ê·  ì˜¨ë„: <span id="planet-temp"></span></p>
        <p>ğŸ“ ì§€êµ¬ ëŒ€ë¹„ í¬ê¸°: <span id="planet-size"></span></p>
        <p>ğŸ”„ ê³µì „ ì£¼ê¸°: <span id="planet-orbit"></span></p>
        <p>ğŸŒ™ ìœ„ì„± ìˆ˜: <span id="planet-moons"></span></p>
    </div>

    <div id="fps">FPS: <span id="fps-val">60</span></div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // Three.js ì´ˆê¸°í™”
        let scene, camera, renderer, controls;
        let planets = [];
        let orbits = [];
        let labels = [];
        let starField;
        let raycaster, mouse;
        let selectedPlanet = null;
        let clock = new THREE.Clock();

        // ìƒíƒœ ë³€ìˆ˜
        let time = 0;
        let speedMultiplier = 1;
        let planetScale = 1;
        let showOrbits = true;
        let showNames = true;
        let isPaused = false;
        let autoRotate = false;
        let realisticScale = false;

        // í–‰ì„± ë°ì´í„°
        const planetData = [
            {
                name: 'íƒœì–‘',
                nameEn: 'Sun',
                type: 'í•­ì„±',
                color: 0xffcc00,
                emissive: 0xffaa00,
                size: 15,
                orbitRadius: 0,
                orbitSpeed: 0,
                angle: 0,
                tilt: 0,
                rotationSpeed: 0.001,
                description: 'íƒœì–‘ê³„ì˜ ì¤‘ì‹¬ì— ìˆëŠ” í•­ì„±',
                temp: '5,500Â°C (í‘œë©´)',
                sizeRatio: '109ë°°',
                orbitPeriod: '-',
                moons: '-',
                isSun: true
            },
            {
                name: 'ìˆ˜ì„±',
                nameEn: 'Mercury',
                type: 'ì•”ì„ í–‰ì„±',
                color: 0x8c8c8c,
                emissive: 0x222222,
                size: 1.5,
                orbitRadius: 35,
                orbitSpeed: 0.04,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.03,
                rotationSpeed: 0.004,
                description: 'íƒœì–‘ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ í–‰ì„±',
                temp: '-180~430Â°C',
                sizeRatio: '0.38ë°°',
                orbitPeriod: '88ì¼',
                moons: '0ê°œ'
            },
            {
                name: 'ê¸ˆì„±',
                nameEn: 'Venus',
                type: 'ì•”ì„ í–‰ì„±',
                color: 0xe6c35c,
                emissive: 0x332200,
                size: 2.5,
                orbitRadius: 50,
                orbitSpeed: 0.015,
                angle: Math.random() * Math.PI * 2,
                tilt: 2.64,
                rotationSpeed: -0.002,
                description: 'ì§€êµ¬ì™€ ë¹„ìŠ·í•œ í¬ê¸°ì˜ ëœ¨ê±°ìš´ í–‰ì„±',
                temp: '462Â°C',
                sizeRatio: '0.95ë°°',
                orbitPeriod: '225ì¼',
                moons: '0ê°œ'
            },
            {
                name: 'ì§€êµ¬',
                nameEn: 'Earth',
                type: 'ì•”ì„ í–‰ì„±',
                color: 0x4d94ff,
                emissive: 0x112244,
                size: 2.8,
                orbitRadius: 70,
                orbitSpeed: 0.01,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.41,
                rotationSpeed: 0.02,
                description: 'ìš°ë¦¬ê°€ ì‚¬ëŠ” í‘¸ë¥¸ í–‰ì„±',
                temp: '15Â°C',
                sizeRatio: '1ë°°',
                orbitPeriod: '365ì¼',
                moons: '1ê°œ',
                hasMoon: true
            },
            {
                name: 'í™”ì„±',
                nameEn: 'Mars',
                type: 'ì•”ì„ í–‰ì„±',
                color: 0xcc4422,
                emissive: 0x331100,
                size: 2,
                orbitRadius: 95,
                orbitSpeed: 0.008,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.44,
                rotationSpeed: 0.018,
                description: 'ë¶‰ì€ ì‚¬ë§‰ì˜ í–‰ì„±',
                temp: '-65Â°C',
                sizeRatio: '0.53ë°°',
                orbitPeriod: '687ì¼',
                moons: '2ê°œ'
            },
            {
                name: 'ëª©ì„±',
                nameEn: 'Jupiter',
                type: 'ê°€ìŠ¤ ê±°ëŒ€ í–‰ì„±',
                color: 0xd4a574,
                emissive: 0x221100,
                size: 8,
                orbitRadius: 140,
                orbitSpeed: 0.002,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.05,
                rotationSpeed: 0.04,
                description: 'íƒœì–‘ê³„ì—ì„œ ê°€ì¥ í° í–‰ì„±',
                temp: '-110Â°C',
                sizeRatio: '11.2ë°°',
                orbitPeriod: '12ë…„',
                moons: '95ê°œ'
            },
            {
                name: 'í† ì„±',
                nameEn: 'Saturn',
                type: 'ê°€ìŠ¤ ê±°ëŒ€ í–‰ì„±',
                color: 0xe6d4a8,
                emissive: 0x222211,
                size: 7,
                orbitRadius: 190,
                orbitSpeed: 0.0009,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.47,
                rotationSpeed: 0.038,
                description: 'ì•„ë¦„ë‹¤ìš´ ê³ ë¦¬ë¥¼ ê°€ì§„ í–‰ì„±',
                temp: '-140Â°C',
                sizeRatio: '9.4ë°°',
                orbitPeriod: '29ë…„',
                moons: '146ê°œ',
                hasRing: true
            },
            {
                name: 'ì²œì™•ì„±',
                nameEn: 'Uranus',
                type: 'ì–¼ìŒ ê±°ëŒ€ í–‰ì„±',
                color: 0x7de3e3,
                emissive: 0x113333,
                size: 4.5,
                orbitRadius: 240,
                orbitSpeed: 0.0004,
                angle: Math.random() * Math.PI * 2,
                tilt: 1.71,
                rotationSpeed: -0.03,
                description: 'ì˜†ìœ¼ë¡œ ëˆ„ì›Œ ìì „í•˜ëŠ” í–‰ì„±',
                temp: '-195Â°C',
                sizeRatio: '4ë°°',
                orbitPeriod: '84ë…„',
                moons: '28ê°œ'
            },
            {
                name: 'í•´ì™•ì„±',
                nameEn: 'Neptune',
                type: 'ì–¼ìŒ ê±°ëŒ€ í–‰ì„±',
                color: 0x4169e1,
                emissive: 0x111144,
                size: 4,
                orbitRadius: 290,
                orbitSpeed: 0.0002,
                angle: Math.random() * Math.PI * 2,
                tilt: 0.49,
                rotationSpeed: 0.032,
                description: 'ê°•í•œ ë°”ëŒì´ ë¶€ëŠ” í‘¸ë¥¸ í–‰ì„±',
                temp: '-200Â°C',
                sizeRatio: '3.9ë°°',
                orbitPeriod: '165ë…„',
                moons: '16ê°œ'
            }
        ];

        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000511);

            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 10000);
            camera.position.set(0, 200, 350);
            camera.lookAt(0, 0, 0);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // OrbitControls - ììœ ë¡œìš´ ì‹œì  ì¡°ì ˆ
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 50;
            controls.maxDistance = 1000;
            controls.maxPolarAngle = Math.PI;

            // Raycaster for click detection
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Lighting
            setupLighting();

            // Create starfield
            createStarfield();

            // Create planets
            createPlanets();

            // Create orbit lines
            createOrbits();

            // Event listeners
            setupEventListeners();

            // Hide loading
            document.getElementById('loading').style.display = 'none';

            // Show camera hint
            showCameraHint();
        }

        function setupLighting() {
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0x333344, 0.3);
            scene.add(ambientLight);

            // Sun light (point light at center)
            const sunLight = new THREE.PointLight(0xffffee, 2, 1000);
            sunLight.position.set(0, 0, 0);
            sunLight.castShadow = true;
            sunLight.shadow.mapSize.width = 2048;
            sunLight.shadow.mapSize.height = 2048;
            scene.add(sunLight);

            // Additional fill light
            const fillLight = new THREE.DirectionalLight(0x4466aa, 0.2);
            fillLight.position.set(-100, 50, 100);
            scene.add(fillLight);
        }

        function createStarfield() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 1,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });

            const starsVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 4000;
                const y = (Math.random() - 0.5) * 4000;
                const z = (Math.random() - 0.5) * 4000;
                starsVertices.push(x, y, z);
            }

            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            starField = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(starField);
        }

        function createPlanets() {
            planetData.forEach((data, index) => {
                let planetMesh;

                if (data.isSun) {
                    // Sun with glow effect
                    const sunGeometry = new THREE.SphereGeometry(data.size * planetScale, 64, 64);
                    const sunMaterial = new THREE.MeshBasicMaterial({
                        color: data.color,
                        transparent: true,
                        opacity: 1
                    });
                    planetMesh = new THREE.Mesh(sunGeometry, sunMaterial);

                    // Sun glow
                    const glowGeometry = new THREE.SphereGeometry(data.size * planetScale * 1.2, 32, 32);
                    const glowMaterial = new THREE.MeshBasicMaterial({
                        color: 0xffaa00,
                        transparent: true,
                        opacity: 0.3,
                        side: THREE.BackSide
                    });
                    const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                    planetMesh.add(glow);

                    // Outer glow
                    const outerGlowGeometry = new THREE.SphereGeometry(data.size * planetScale * 1.5, 32, 32);
                    const outerGlowMaterial = new THREE.MeshBasicMaterial({
                        color: 0xff6600,
                        transparent: true,
                        opacity: 0.15,
                        side: THREE.BackSide
                    });
                    const outerGlow = new THREE.Mesh(outerGlowGeometry, outerGlowMaterial);
                    planetMesh.add(outerGlow);

                } else {
                    // Regular planet
                    const geometry = new THREE.SphereGeometry(data.size * planetScale, 32, 32);
                    const material = new THREE.MeshStandardMaterial({
                        color: data.color,
                        emissive: data.emissive,
                        emissiveIntensity: 0.1,
                        metalness: 0.1,
                        roughness: 0.8
                    });
                    planetMesh = new THREE.Mesh(geometry, material);
                    planetMesh.castShadow = true;
                    planetMesh.receiveShadow = true;

                    // Add ring for Saturn
                    if (data.hasRing) {
                        const ringGeometry = new THREE.RingGeometry(
                            data.size * planetScale * 1.4,
                            data.size * planetScale * 2.2,
                            64
                        );
                        const ringMaterial = new THREE.MeshBasicMaterial({
                            color: 0xc4a868,
                            transparent: true,
                            opacity: 0.7,
                            side: THREE.DoubleSide
                        });
                        const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                        ring.rotation.x = Math.PI / 2.5;
                        planetMesh.add(ring);
                    }

                    // Add moon for Earth
                    if (data.hasMoon) {
                        const moonGeometry = new THREE.SphereGeometry(0.8 * planetScale, 16, 16);
                        const moonMaterial = new THREE.MeshStandardMaterial({
                            color: 0xcccccc,
                            emissive: 0x222222,
                            emissiveIntensity: 0.1,
                            metalness: 0.1,
                            roughness: 0.9
                        });
                        const moon = new THREE.Mesh(moonGeometry, moonMaterial);
                        moon.position.set(6 * planetScale, 0, 0);
                        moon.userData.isMoon = true;
                        moon.userData.moonAngle = 0;
                        planetMesh.add(moon);
                    }
                }

                // Apply tilt
                planetMesh.rotation.z = data.tilt;

                // Store data
                planetMesh.userData = {
                    ...data,
                    index: index
                };

                // Initial position
                if (data.orbitRadius > 0) {
                    planetMesh.position.x = Math.cos(data.angle) * data.orbitRadius;
                    planetMesh.position.z = Math.sin(data.angle) * data.orbitRadius;
                }

                scene.add(planetMesh);
                planets.push(planetMesh);

                // Create label
                createLabel(planetMesh, data.name);
            });
        }

        function createLabel(planet, name) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 64;

            context.fillStyle = 'rgba(0, 0, 0, 0)';
            context.fillRect(0, 0, canvas.width, canvas.height);

            context.font = 'Bold 32px Courier New';
            context.fillStyle = 'rgba(255, 255, 255, 0.8)';
            context.textAlign = 'center';
            context.fillText(name, 128, 40);

            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({
                map: texture,
                transparent: true,
                depthTest: false
            });
            const sprite = new THREE.Sprite(spriteMaterial);
            sprite.scale.set(20, 5, 1);
            sprite.userData.planet = planet;

            scene.add(sprite);
            labels.push(sprite);
        }

        function createOrbits() {
            planetData.forEach((data) => {
                if (data.orbitRadius > 0) {
                    const orbitGeometry = new THREE.BufferGeometry();
                    const orbitPoints = [];

                    for (let i = 0; i <= 128; i++) {
                        const angle = (i / 128) * Math.PI * 2;
                        orbitPoints.push(
                            Math.cos(angle) * data.orbitRadius,
                            0,
                            Math.sin(angle) * data.orbitRadius
                        );
                    }

                    orbitGeometry.setAttribute('position', new THREE.Float32BufferAttribute(orbitPoints, 3));

                    const orbitMaterial = new THREE.LineBasicMaterial({
                        color: 0x444466,
                        transparent: true,
                        opacity: 0.4
                    });

                    const orbit = new THREE.Line(orbitGeometry, orbitMaterial);
                    scene.add(orbit);
                    orbits.push(orbit);
                }
            });
        }

        function updatePlanets(delta) {
            if (isPaused) return;

            planets.forEach((planet, index) => {
                const data = planet.userData;

                // Orbit
                if (data.orbitRadius > 0) {
                    data.angle += data.orbitSpeed * speedMultiplier * delta * 60;
                    planet.position.x = Math.cos(data.angle) * data.orbitRadius;
                    planet.position.z = Math.sin(data.angle) * data.orbitRadius;
                }

                // Self rotation
                planet.rotation.y += data.rotationSpeed * speedMultiplier * delta * 60;

                // Moon orbit (for Earth)
                if (data.hasMoon) {
                    const moon = planet.children.find(child => child.userData.isMoon);
                    if (moon) {
                        moon.userData.moonAngle += 0.02 * speedMultiplier * delta * 60;
                        const moonDist = 6 * planetScale;
                        moon.position.x = Math.cos(moon.userData.moonAngle) * moonDist;
                        moon.position.z = Math.sin(moon.userData.moonAngle) * moonDist;
                    }
                }
            });

            // Update labels position
            labels.forEach((label, index) => {
                const planet = planets[index];
                if (planet) {
                    label.position.copy(planet.position);
                    label.position.y += planet.userData.size * planetScale + 5;
                }
            });
        }

        function setupEventListeners() {
            // Window resize
            window.addEventListener('resize', onWindowResize);

            // Mouse click for planet selection
            renderer.domElement.addEventListener('click', onMouseClick);

            // Keyboard
            document.addEventListener('keydown', onKeyDown);

            // Controls
            document.getElementById('speed').addEventListener('input', (e) => {
                speedMultiplier = parseFloat(e.target.value);
                document.getElementById('speed-val').textContent = speedMultiplier.toFixed(1) + 'x';
            });

            document.getElementById('planet-scale').addEventListener('input', (e) => {
                planetScale = parseFloat(e.target.value);
                document.getElementById('scale-val').textContent = planetScale.toFixed(1) + 'x';
                updatePlanetScales();
            });

            document.getElementById('toggle-orbits').addEventListener('click', () => {
                showOrbits = !showOrbits;
                orbits.forEach(orbit => orbit.visible = showOrbits);
                document.getElementById('toggle-orbits').textContent = showOrbits ? 'ê¶¤ë„ ìˆ¨ê¸°ê¸°' : 'ê¶¤ë„ í‘œì‹œ';
            });

            document.getElementById('toggle-names').addEventListener('click', () => {
                showNames = !showNames;
                labels.forEach(label => label.visible = showNames);
                document.getElementById('toggle-names').textContent = showNames ? 'ì´ë¦„ ìˆ¨ê¸°ê¸°' : 'ì´ë¦„ í‘œì‹œ';
            });

            document.getElementById('reset-view').addEventListener('click', resetView);

            document.getElementById('toggle-pause').addEventListener('click', () => {
                isPaused = !isPaused;
                document.getElementById('toggle-pause').textContent = isPaused ? 'ì¬ìƒ' : 'ì¼ì‹œì •ì§€';
            });

            document.getElementById('auto-rotate').addEventListener('click', () => {
                autoRotate = !autoRotate;
                controls.autoRotate = autoRotate;
                controls.autoRotateSpeed = 0.5;
                document.getElementById('auto-rotate').classList.toggle('active', autoRotate);
            });

            document.getElementById('toggle-realistic').addEventListener('click', () => {
                realisticScale = !realisticScale;
                document.getElementById('toggle-realistic').classList.toggle('active', realisticScale);
                // This would adjust orbit distances to be more realistic
            });

            // View mode buttons
            document.getElementById('view-top').addEventListener('click', () => setView('top'));
            document.getElementById('view-side').addEventListener('click', () => setView('side'));
            document.getElementById('view-front').addEventListener('click', () => setView('front'));
            document.getElementById('view-free').addEventListener('click', () => setView('free'));
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(planets, true);

            if (intersects.length > 0) {
                let clickedObject = intersects[0].object;

                // Find the parent planet if clicked on a child (ring, moon, etc.)
                while (clickedObject.parent && !clickedObject.userData.name) {
                    clickedObject = clickedObject.parent;
                }

                if (clickedObject.userData.name) {
                    selectPlanet(clickedObject);
                }
            } else {
                deselectPlanet();
            }
        }

        function selectPlanet(planet) {
            selectedPlanet = planet;
            updateInfoPanel(planet.userData);

            // Visual highlight
            planets.forEach(p => {
                if (p.material && p.material.emissiveIntensity !== undefined) {
                    p.material.emissiveIntensity = (p === planet) ? 0.5 : 0.1;
                }
            });
        }

        function deselectPlanet() {
            selectedPlanet = null;
            document.getElementById('info-panel').style.display = 'none';

            planets.forEach(p => {
                if (p.material && p.material.emissiveIntensity !== undefined) {
                    p.material.emissiveIntensity = 0.1;
                }
            });
        }

        function updateInfoPanel(data) {
            document.getElementById('info-panel').style.display = 'block';
            document.getElementById('planet-name').textContent = `${data.name} (${data.nameEn})`;
            document.getElementById('planet-type').textContent = data.type;
            document.getElementById('planet-color-box').style.backgroundColor = '#' + data.color.toString(16).padStart(6, '0');
            document.getElementById('planet-desc').textContent = data.description;
            document.getElementById('planet-temp').textContent = data.temp;
            document.getElementById('planet-size').textContent = data.sizeRatio;
            document.getElementById('planet-orbit').textContent = data.orbitPeriod;
            document.getElementById('planet-moons').textContent = data.moons;
        }

        function onKeyDown(event) {
            switch (event.code) {
                case 'Space':
                    event.preventDefault();
                    isPaused = !isPaused;
                    document.getElementById('toggle-pause').textContent = isPaused ? 'ì¬ìƒ' : 'ì¼ì‹œì •ì§€';
                    break;
                case 'KeyR':
                    resetView();
                    break;
                case 'Digit1':
                    setView('top');
                    break;
                case 'Digit2':
                    setView('side');
                    break;
                case 'Digit3':
                    setView('front');
                    break;
                case 'Digit4':
                    setView('free');
                    break;
            }
        }

        function setView(viewType) {
            // Update button states
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));

            switch (viewType) {
                case 'top':
                    animateCamera(0, 400, 0);
                    document.getElementById('view-top').classList.add('active');
                    break;
                case 'side':
                    animateCamera(400, 50, 0);
                    document.getElementById('view-side').classList.add('active');
                    break;
                case 'front':
                    animateCamera(0, 50, 400);
                    document.getElementById('view-front').classList.add('active');
                    break;
                case 'free':
                    document.getElementById('view-free').classList.add('active');
                    break;
            }
        }

        function animateCamera(x, y, z) {
            const startPos = camera.position.clone();
            const endPos = new THREE.Vector3(x, y, z);
            const duration = 1000;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3); // Ease out cubic

                camera.position.lerpVectors(startPos, endPos, eased);
                camera.lookAt(0, 0, 0);
                controls.update();

                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }

            animate();
        }

        function resetView() {
            animateCamera(0, 200, 350);
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('view-free').classList.add('active');
        }

        function updatePlanetScales() {
            planets.forEach((planet, index) => {
                const data = planetData[index];
                const newScale = data.size * planetScale / data.size;
                planet.scale.setScalar(planetScale);
            });
        }

        function showCameraHint() {
            const hint = document.createElement('div');
            hint.className = 'camera-hint';
            hint.innerHTML = 'ğŸ–±ï¸ ë§ˆìš°ìŠ¤ë¡œ ë“œë˜ê·¸í•˜ì—¬ 3D ì‹œì ì„ ììœ ë¡­ê²Œ ì¡°ì ˆí•˜ì„¸ìš”!';
            document.body.appendChild(hint);

            setTimeout(() => {
                hint.remove();
            }, 4000);
        }

        // FPS counter
        let frameCount = 0;
        let lastFpsUpdate = 0;

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            const delta = clock.getDelta();

            // Update planets
            updatePlanets(delta);

            // Update controls
            controls.update();

            // Render
            renderer.render(scene, camera);

            // FPS
            frameCount++;
            const now = performance.now();
            if (now - lastFpsUpdate >= 1000) {
                document.getElementById('fps-val').textContent = frameCount;
                frameCount = 0;
                lastFpsUpdate = now;
            }
        }

        // Start
        init();
        animate();
    </script>
</body>
</html>
